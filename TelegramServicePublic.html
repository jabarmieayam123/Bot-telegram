
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Telegram Service - Public</title>
<style>
body {
  background: #0d1117;
  color: #fff;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 1000px;
  margin: auto;
  padding: 30px;
}
.section {
  background: #161b22;
  padding: 30px;
  border-radius: 20px;
  margin-bottom: 35px;
  box-shadow: 0 0 15px rgba(0,0,0,0.7);
}
h2 {
  font-size: 28px;
  margin-bottom: 20px;
  color: #58a6ff;
}
label {
  display: block;
  font-size: 20px;
  margin-bottom: 10px;
  font-weight: bold;
}
input, textarea {
  width: 100%;
  padding: 18px;
  font-size: 20px;
  border: none;
  border-radius: 14px;
  margin-bottom: 20px;
  background: #0d1117;
  color: #fff;
}
textarea {
  resize: none;
  height: 140px;
}
.btn-row {
  display: flex;
  gap: 20px;
  margin-top: 15px;
}
button {
  flex: 1;
  padding: 20px;
  border: none;
  border-radius: 14px;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  color: #fff;
  transition: 0.3s;
}
.btn-save { background: #238636; }
.btn-save:hover { background: #2ea043; }
.btn-clear { background: #da3633; }
.btn-clear:hover { background: #f85149; }
.btn-start { background: #1f6feb; }
.btn-start:hover { background: #388bfd; }
.btn-stop { background: #b62324; }
.btn-stop:hover { background: #da3633; }
.log-box {
  background: #0d1117;
  border: 1px solid #30363d;
  border-radius: 14px;
  height: 300px;
  overflow-y: auto;
  padding: 15px;
  font-size: 18px;
}
.success { color: #2ea043; }
.error { color: #f85149; }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h2>Telegram Service</h2>
<p style="font-size:18px;color:#aaa">Token & Chat ID publik ‚Ä¢ Langsung kirim</p>

<label>Bot Token</label>
<input type="text" id="botToken" placeholder="Masukkan Bot Token">

<label>Telegram Chat ID (User atau Group)</label>
<input type="text" id="chatId" placeholder="Masukkan Chat ID">

<div class="btn-row">
<button class="btn-save" onclick="saveData()">Save Tokens</button>
<button class="btn-clear" onclick="clearData()">Clear All</button>
</div>
</div>

<div class="section">
<h2>Message & Options</h2>
<label>Pesan</label>
<textarea id="message" placeholder="Tulis pesan disini..."></textarea>

<label>Jumlah Kirim</label>
<input type="number" id="count" placeholder="Masukkan jumlah">

<label>Delay (detik)</label>
<input type="number" id="delay" placeholder="Masukkan delay per pesan">

<div class="btn-row">
<button class="btn-start" onclick="startSend()">Start Send</button>
<button class="btn-stop" onclick="stopSend()">Stop Send</button>
</div>
</div>

<div class="section">
<h2>Log Pengiriman</h2>
<div id="log" class="log-box"></div>
</div>
</div>

<script>
let stopFlag = false;

// Simpan token & chat ID secara publik di file
let publicData = {};

function saveData() {
  const botToken = document.getElementById('botToken').value.trim();
  const chatId   = document.getElementById('chatId').value.trim();
  const message  = document.getElementById('message').value.trim();
  const count    = document.getElementById('count').value.trim();
  const delay    = document.getElementById('delay').value.trim();

  if (!botToken || !chatId || !message || !count || !delay) {
    alert("‚ùå Semua field wajib diisi!");
    return;
  }

  publicData = {
    botToken,
    chatId,
    message,
    count: parseInt(count),
    delay: parseInt(delay)
  };

  alert("‚úÖ Data tersimpan publik di file!");
}

function clearData() {
  document.getElementById('botToken').value = "";
  document.getElementById('chatId').value = "";
  document.getElementById('message').value = "";
  document.getElementById('count').value = "";
  document.getElementById('delay').value = "";
  publicData = {};
  alert("üóë Semua data dihapus!");
}

async function sendMessage(botToken, chatId, message) {
  try {
    const res = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: chatId, text: message })
    });
    const data = await res.json();
    if (data.ok) addLog("Pesan terkirim", "success");
    else addLog("Gagal: " + JSON.stringify(data), "error");
  } catch (err) {
    addLog("Gagal koneksi ke Telegram", "error");
  }
}

async function startSend() {
  if (!publicData.botToken || !publicData.chatId || !publicData.message) {
    alert("‚ùå Simpan data dulu!");
    return;
  }

  stopFlag = false;

  for (let i = 1; i <= publicData.count; i++) {
    if (stopFlag) {
      addLog("‚èπ Dihentikan.", "error");
      break;
    }
    await sendMessage(publicData.botToken, publicData.chatId, publicData.message);
    await new Promise(res => setTimeout(res, publicData.delay * 1000));
  }

  addLog("‚úÖ Selesai.", "success");
}

function stopSend() { stopFlag = true; }

function addLog(msg, type) {
  const logBox = document.getElementById("log");
  const p = document.createElement("div");
  p.textContent = msg;
  p.className = type;
  logBox.appendChild(p);
  logBox.scrollTop = logBox.scrollHeight;
}
</script>
</body>
</html>
